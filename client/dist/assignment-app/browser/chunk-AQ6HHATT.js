import{a as st,b as M}from"./chunk-DFCDJCUG.js";import{a as N,b as B,c as q,d as G,e as J,f as K,g as Q,h as X,i as Y,j as Z,k as tt,l as et,m as ot,p as nt,t as rt}from"./chunk-557KHQMN.js";import{A as z,B as A,C as U,a as V,d as k,v as j,z as W}from"./chunk-EIUGJP32.js";import{Ad as O,Fa as v,Fb as a,Gb as w,Ha as l,Hb as E,Hd as $,Kb as T,La as x,Lb as y,Mb as L,Qd as it,Sa as S,Xa as d,a as P,b as D,cb as h,ia as u,ja as _,lb as n,mb as r,nb as b,ob as c,oc as I,pb as p,rb as g,sc as R,tb as C,td as H,ub as f,xd as F}from"./chunk-AOFWL5JT.js";function lt(e,t){e&1&&(n(0,"th",14),a(1," Image "),r())}function dt(e,t){if(e&1){let o=g();n(0,"td",15)(1,"img",16),C("error",function(s){let m=u(o).$implicit,mt=f();return _(mt.onImageError(m,s))}),r()()}if(e&2){let o=t.$implicit;l(),h("src","http://localhost:8010"+o.image,v)}}function ct(e,t){e&1&&(n(0,"th",14),a(1," Name "),r())}function pt(e,t){if(e&1&&(n(0,"td",15),a(1),r()),e&2){let o=t.$implicit;l(),w(o.name)}}function ft(e,t){e&1&&(n(0,"th",14),a(1," Email "),r())}function ut(e,t){if(e&1&&(n(0,"td",15),a(1),r()),e&2){let o=t.$implicit;l(),w(o.email)}}function _t(e,t){e&1&&(n(0,"th",14),a(1," Password "),r())}function ht(e,t){if(e&1){let o=g();n(0,"td",15),a(1),n(2,"button",17),C("click",function(){let s=u(o).$implicit,m=f();return _(m.togglePassword(s.id))}),n(3,"mat-icon"),a(4),r()()()}if(e&2){let o=t.$implicit,i=f();l(),E(" ",i.showPasswords[o.id]?o.password:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"," "),l(3),w(i.showPasswords[o.id]?"visibility_off":"visibility")}}function Ct(e,t){e&1&&(n(0,"th",14),a(1," Actions "),r())}function gt(e,t){if(e&1){let o=g();n(0,"td",15)(1,"button",18),C("click",function(){let s=u(o).$implicit,m=f();return _(m.editProfessor(s))}),n(2,"mat-icon"),a(3,"edit"),r()(),n(4,"button",19),C("click",function(){let s=u(o).$implicit,m=f();return _(m.deleteProfessor(s.id))}),n(5,"mat-icon"),a(6,"delete"),r()()()}}function wt(e,t){e&1&&b(0,"tr",20)}function xt(e,t){e&1&&b(0,"tr",21)}var at=class e{constructor(t,o){this.http=t;this.dialog=o}professors=[];searchText="";showPasswords={};displayedColumns=["image","name","email","password","actions"];ngOnInit(){this.fetchProfessors()}fetchProfessors(){this.http.get("http://localhost:8010/api/professors").subscribe(t=>{this.professors=t})}get filteredProfessors(){return this.professors.filter(t=>t.name.toLowerCase().includes(this.searchText.toLowerCase()))}togglePassword(t){this.showPasswords[t]=!this.showPasswords[t]}editProfessor(t){this.dialog.open(M,{data:{action:"edit",member:t,nameField:"name"},width:"400px"}).afterClosed().subscribe(i=>{if(i){let s=D(P({},t),{name:i.name,password:i.password,image:i.image});this.http.put(`http://localhost:8010/api/professors/${t.id}`,s).subscribe(()=>this.fetchProfessors())}})}deleteProfessor(t){let o=this.professors.find(s=>s.id===t);if(!o)return;this.dialog.open(M,{data:{action:"delete",member:o,nameField:"name"},width:"400px"}).afterClosed().subscribe(s=>{s&&this.http.delete(`http://localhost:8010/api/professors/${t}`).subscribe(()=>this.fetchProfessors())})}onImageError(t,o){t.image="";let i=o.target;i.src="https://ui-avatars.com/api/?name="+t.name}static \u0275fac=function(o){return new(o||e)(x(R),x(nt))};static \u0275cmp=S({type:e,selectors:[["app-professors-list"]],decls:26,vars:4,consts:[[1,"students-wrapper"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Type professor name...",3,"ngModelChange","ngModel"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","password"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["width","40","height","40",1,"rounded-img",3,"error","src"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,i){o&1&&(n(0,"div",0)(1,"h2"),a(2,"\u{1F469}\u200D\u{1F3EB} Professors"),r(),n(3,"mat-form-field",1)(4,"mat-label"),a(5,"\u{1F50D} Search by name"),r(),n(6,"input",2),L("ngModelChange",function(m){return y(i.searchText,m)||(i.searchText=m),m}),r()()(),n(7,"div",3)(8,"table",4),c(9,5),d(10,lt,2,0,"th",6)(11,dt,2,1,"td",7),p(),c(12,8),d(13,ct,2,0,"th",6)(14,pt,2,1,"td",7),p(),c(15,9),d(16,ft,2,0,"th",6)(17,ut,2,1,"td",7),p(),c(18,10),d(19,_t,2,0,"th",6)(20,ht,5,2,"td",7),p(),c(21,11),d(22,Ct,2,0,"th",6)(23,gt,7,0,"td",7),p(),d(24,wt,1,0,"tr",12)(25,xt,1,0,"tr",13),r()()),o&2&&(l(6),T("ngModel",i.searchText),l(2),h("dataSource",i.filteredProfessors),l(16),h("matHeaderRowDef",i.displayedColumns),l(),h("matRowDefColumns",i.displayedColumns))},dependencies:[I,$,H,F,O,z,W,j,U,A,ot,q,J,Y,K,G,Z,Q,X,tt,et,st,it,B,N,k,V,rt],styles:[".students-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px}.full-width[_ngcontent-%COMP%]{width:90%;max-width:800px;margin-bottom:6px}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:20px;border-radius:10px;background:#fff;padding:16px;box-shadow:0 4px 20px #00000014}img.rounded-img[_ngcontent-%COMP%]{border-radius:50%;object-fit:cover}mat-icon-button[_ngcontent-%COMP%]{margin-left:4px}  mat-icon-button{margin-left:4px;margin-right:4px;color:#555;transition:color .2s ease}  mat-icon-button.edit-button{color:#1976d2}  mat-icon-button.delete-button{color:#d32f2f}  mat-icon-button.toggle-button{color:#616161}  mat-icon-button:hover{color:#000;background-color:#0000000d;border-radius:50%}"]})};export{at as ProfessorsListComponent};
