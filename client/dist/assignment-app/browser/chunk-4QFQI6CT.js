import{a as rt,b as x}from"./chunk-DFCDJCUG.js";import{a as $,b as j,c as q,d as G,e as J,f as K,g as Q,h as X,i as Y,j as Z,k as tt,l as et,m as nt,p as ot,t as at}from"./chunk-557KHQMN.js";import{A as z,B as A,C as U,a as N,d as R,v as B,z as W}from"./chunk-EIUGJP32.js";import{Ad as F,Fa as v,Fb as l,Gb as S,Ha as s,Hb as y,Hd as O,Kb as E,La as b,Lb as L,Mb as I,Qd as it,Sa as T,Xa as d,a as M,b as D,cb as g,ia as f,ja as _,lb as o,mb as a,nb as w,ob as u,oc as P,pb as c,rb as h,sc as k,tb as C,td as V,ub as p,xd as H}from"./chunk-AOFWL5JT.js";function st(e,t){e&1&&(o(0,"th",14),l(1," Image "),a())}function dt(e,t){if(e&1){let n=h();o(0,"td",15)(1,"img",16),C("error",function(r){let m=f(n).$implicit,mt=p();return _(mt.onImageError(m,r))}),a()()}if(e&2){let n=t.$implicit;s(),g("src","https://angularbackend-1493.onrender.com"+n.image,v)}}function ut(e,t){e&1&&(o(0,"th",14),l(1," Full Name "),a())}function ct(e,t){if(e&1&&(o(0,"td",15),l(1),a()),e&2){let n=t.$implicit;s(),S(n.fullName)}}function pt(e,t){e&1&&(o(0,"th",14),l(1," Email "),a())}function ft(e,t){if(e&1&&(o(0,"td",15),l(1),a()),e&2){let n=t.$implicit;s(),S(n.email)}}function _t(e,t){e&1&&(o(0,"th",14),l(1," Password "),a())}function gt(e,t){if(e&1){let n=h();o(0,"td",15),l(1),o(2,"button",17),C("click",function(){let r=f(n).$implicit,m=p();return _(m.togglePassword(r.id))}),o(3,"mat-icon"),l(4),a()()()}if(e&2){let n=t.$implicit,i=p();s(),y(" ",i.showPasswords[n.id]?n.password:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"," "),s(3),S(i.showPasswords[n.id]?"visibility_off":"visibility")}}function Ct(e,t){e&1&&(o(0,"th",14),l(1," Actions "),a())}function ht(e,t){if(e&1){let n=h();o(0,"td",15)(1,"button",18),C("click",function(){let r=f(n).$implicit,m=p();return _(m.editStudent(r))}),o(2,"mat-icon"),l(3,"edit"),a()(),o(4,"button",19),C("click",function(){let r=f(n).$implicit,m=p();return _(m.deleteStudent(r.id))}),o(5,"mat-icon"),l(6,"delete"),a()()()}}function St(e,t){e&1&&w(0,"tr",20)}function bt(e,t){e&1&&w(0,"tr",21)}var lt=class e{constructor(t,n){this.http=t;this.dialog=n}students=[];searchText="";showPasswords={};displayedColumns=["image","fullName","email","password","actions"];ngOnInit(){this.fetchStudents()}fetchStudents(){this.http.get("https://angularbackend-1493.onrender.com/api/students").subscribe(t=>{this.students=t})}get filteredStudents(){return this.students.filter(t=>t.fullName.toLowerCase().includes(this.searchText.toLowerCase()))}togglePassword(t){this.showPasswords[t]=!this.showPasswords[t]}editStudent(t){this.dialog.open(x,{data:{action:"edit",member:t,nameField:"fullName"},width:"400px"}).afterClosed().subscribe(i=>{if(i){let r=D(M({},t),{fullName:i.name,password:i.password,image:i.image});this.http.put(`https://angularbackend-1493.onrender.com/api/students/${t.id}`,r).subscribe(()=>this.fetchStudents())}})}deleteStudent(t){let n=this.students.find(r=>r.id===t);if(!n)return;this.dialog.open(x,{data:{action:"delete",member:n,nameField:"fullName"},width:"400px"}).afterClosed().subscribe(r=>{r&&this.http.delete(`https://angularbackend-1493.onrender.com/api/students/${t}`).subscribe(()=>this.fetchStudents())})}onImageError(t,n){t.image="";let i=n.target;i.src="https://ui-avatars.com/api/?name="+t.fullName}static \u0275fac=function(n){return new(n||e)(b(k),b(ot))};static \u0275cmp=T({type:e,selectors:[["app-students-list"]],decls:26,vars:4,consts:[[1,"students-wrapper"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Type a student name...",3,"ngModelChange","ngModel"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fullName"],["matColumnDef","email"],["matColumnDef","password"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["width","40","height","40",1,"rounded-img",3,"error","src"],["mat-icon-button","",1,"toggle-button",3,"click"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,i){n&1&&(o(0,"div",0)(1,"h2"),l(2,"\u{1F468}\u200D\u{1F393} Students"),a(),o(3,"mat-form-field",1)(4,"mat-label"),l(5,"\u{1F50D} Search by name"),a(),o(6,"input",2),I("ngModelChange",function(m){return L(i.searchText,m)||(i.searchText=m),m}),a()()(),o(7,"div",3)(8,"table",4),u(9,5),d(10,st,2,0,"th",6)(11,dt,2,1,"td",7),c(),u(12,8),d(13,ut,2,0,"th",6)(14,ct,2,1,"td",7),c(),u(15,9),d(16,pt,2,0,"th",6)(17,ft,2,1,"td",7),c(),u(18,10),d(19,_t,2,0,"th",6)(20,gt,5,2,"td",7),c(),u(21,11),d(22,Ct,2,0,"th",6)(23,ht,7,0,"td",7),c(),d(24,St,1,0,"tr",12)(25,bt,1,0,"tr",13),a()()),n&2&&(s(6),E("ngModel",i.searchText),s(2),g("dataSource",i.filteredStudents),s(16),g("matHeaderRowDef",i.displayedColumns),s(),g("matRowDefColumns",i.displayedColumns))},dependencies:[P,O,V,H,F,z,W,B,U,A,nt,q,J,Y,K,G,Z,Q,X,tt,et,rt,it,j,$,R,N,at],styles:[".students-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px}.full-width[_ngcontent-%COMP%]{width:90%;max-width:800px;margin-bottom:6px}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:20px;border-radius:10px;background:#fff;padding:16px;box-shadow:0 4px 20px #00000014}img.rounded-img[_ngcontent-%COMP%]{border-radius:50%;object-fit:cover}mat-icon-button[_ngcontent-%COMP%]{margin-left:4px}  mat-icon-button{margin-left:4px;margin-right:4px;color:#555;transition:color .2s ease}  mat-icon-button.edit-button{color:#1976d2}  mat-icon-button.delete-button{color:#d32f2f}  mat-icon-button.toggle-button{color:#616161}  mat-icon-button:hover{color:#000;background-color:#0000000d;border-radius:50%}"]})};export{lt as StudentsListComponent};
